"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}function ready(){var t=document.querySelector(".js-slider");t&&new Slider(t)}document.addEventListener("DOMContentLoaded",ready);var Slider=function(){function e(t){_classCallCheck(this,e),this.$element=t,this.$slides=t.querySelectorAll(".slider-item"),this.$textItems=[],this.$text=[],this.$arrayParams=[],this.$time=this.$element.dataset.time&&""!=this.$element.dataset.time?parseInt(this.$element.dataset.time):500,this.$link=this.$element.dataset.link&&""!=this.$element.dataset.link?this.$element.dataset.link:"",this.setSliderDOM(),this.setSliderParam(),this.startAnimation()}return _createClass(e,[{key:"setSliderDOM",value:function(){var t=this,e=document.createElement("div");e.classList.add("slider-description"),this.$element.appendChild(e);for(var s=0;s<this.$slides.length;s++)e.appendChild(this.$slides[s].getElementsByClassName("slider-item-text")[0]);this.$textItems=this.$element.querySelectorAll(".slider-item-text"),setTimeout(function(){t.$element.style.opacity="1"},500)}},{key:"setSliderParam",value:function(){for(var t=0;t<this.$textItems.length;t++){this.$textItems[t].getElementsByTagName("span")[0]?this.$text[t]=this.$textItems[t].getElementsByTagName("span")[0]:(this.$text[t]=null,this.$textItems[t].classList.add("is-opacity"));var e=this.$textItems[t];this.$arrayParams[t]={text:null!=this.$text[t]?this.$text[t].innerText:"",textTime:parseInt(e.dataset.textTime&&""!=e.dataset.textTime?e.dataset.textTime:1500),slideDelay:parseInt(this.$slides[t].dataset.zoomDelay&&""!=this.$slides[t].dataset.zoomDelay?this.$slides[t].dataset.zoomDelay:0),opacytiTime:parseInt(this.$slides[t].dataset.opacytiTime&&""!=this.$slides[t].dataset.opacytiTime?this.$slides[t].dataset.opacytiTime:2e3),slideTime:parseInt(this.$slides[t].dataset.slideTime&&""!=this.$slides[t].dataset.slideTime?this.$slides[t].dataset.slideTime:3e3),animation:e.dataset.animation&&""!=e.dataset.animation?e.dataset.animation:"smoothly",delay:parseInt(e.dataset.textDelay&&""!=e.dataset.textDelay?e.dataset.textDelay:500),transform:parseInt(e.dataset.zoom&&""!=e.dataset.zoom?e.dataset.zoom:20),transformImg:parseInt(this.$slides[t].dataset.zoom&&""!=this.$slides[t].dataset.zoom?this.$slides[t].dataset.zoom:10)}}}},{key:"startAnimation",value:function(){for(var e=this,s=0,t=function(t){0<t&&(s+=e.$arrayParams[t-1].slideTime),setTimeout(function(){e.changeImages(t),"transform"==e.$arrayParams[t].animation&&e.$text[t].classList.add("transform-start"),setTimeout(function(){"transform"==e.$arrayParams[t].animation?e.changeTextTransform(t):"spell"==e.$arrayParams[t].animation?(e.setText(t),e.changeTextSpell(t,e.$arrayParams[t].textTime)):"smoothly"==e.$arrayParams[t].animation?(e.cloneText(t),e.changeTextWidth(t)):"opacity"==e.$arrayParams[t].animation&&(e.deleteOldClasses(t),e.$textItems[t].classList.remove("is-opacity"))},e.$arrayParams[t].delay)},s)},a=0;a<this.$slides.length;a++)t(a);s+=this.$arrayParams[this.$slides.length-1].slideTime+this.$time,""!=this.$link&&setTimeout(function(){window.location.href=e.$link},s)}},{key:"setText",value:function(t){0<t&&(this.$text[t-1].style.display="none"),this.$text[t].innerText="",this.$text[t].classList.add("for-spell")}},{key:"changeTextSpell",value:function(e,s){var a=this;this.deleteOldClasses(e);for(var i=this.$arrayParams[e].text.length,t=function(t){setTimeout(function(){a.$text[e].innerText=a.$arrayParams[e].text.substring(0,t+1)},t*s/i)},n=0;n<i;n++)t(n)}},{key:"changeImages",value:function(t){this.$slides[t].classList.add("active");var e=(this.$arrayParams[t].transformImg+100)/100;this.$slides[t].style.transform="scale("+e+","+e+")",this.$slides[t].style.transitionDelay=this.$arrayParams[t].slideDelay/1e3+"s, 0s",this.$slides[t].style.transitionDuration=(this.$arrayParams[t].slideTime-this.$arrayParams[t].slideDelay)/1e3+"s, "+this.$arrayParams[t].opacytiTime/1e3+"s"}},{key:"changeTextTransform",value:function(t){this.deleteOldClasses(t);var e=(this.$arrayParams[t].transform+100)/100;this.$text[t].style.transform="scale("+e+","+e+")",this.$text[t].classList.add("for-transform"),this.$text[t].style.transitionDuration=this.$arrayParams[t].textTime/1e3+"s"}},{key:"cloneText",value:function(t){var e=document.createElement("span");e.classList.add("clone-text"),e.innerHTML=this.$arrayParams[t].text.split(" ").join("&nbsp;"),this.$text[t].appendChild(e)}},{key:"changeTextWidth",value:function(e){var s=this;this.deleteOldClasses(e);for(var a=this.$text[e].offsetWidth,t=function(t){setTimeout(function(){s.$text[e].getElementsByClassName("clone-text")[0].style.width=t+"px"},t*s.$arrayParams[e].textTime/a)},i=1;i<=a;i++)t(i)}},{key:"deleteOldClasses",value:function(t){0<t&&(null!=this.$text[t-1]?(this.$text[t-1].style.display="none",this.$text[t-1].classList.contains("for-smoothly")&&this.$text[t-1].classList.remove("for-smoothly"),this.$text[t-1].classList.contains("for-spell")&&this.$text[t-1].classList.remove("for-spell"),this.$text[t-1].classList.contains("for-transform")&&this.$text[t-1].classList.remove("for-transform")):(this.$textItems[t-1].classList.add("is-opacity"),this.deleteOldClasses(t-1)))}}]),e}();