"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}function ready(){var t=document.querySelector(".js-slider");t&&new Slider(t)}document.addEventListener("DOMContentLoaded",ready);var Slider=function(){function e(t){_classCallCheck(this,e),this.$element=t,this.$slides=t.querySelectorAll(".slider-item"),this.$text=t.querySelectorAll(".slider-item-text > span"),this.$arrayParams=[],this.$time=this.$element.dataset.time&&""!=this.$element.dataset.time?parseInt(this.$element.dataset.time):500,this.$link=this.$element.dataset.link&&""!=this.$element.dataset.link?this.$element.dataset.link:"",this.setSliderParam(),this.startAnimation2()}return _createClass(e,[{key:"setSliderParam",value:function(){for(var t=0;t<this.$text.length;t++){var e=this.$text[t].parentNode;this.$arrayParams[t]={text:this.$text[t].innerText,textTime:parseInt(e.dataset.textTime&&""!=e.dataset.textTime?e.dataset.textTime:1500),slideTime:parseInt(e.dataset.slideTime&&""!=e.dataset.slideTime?e.dataset.slideTime:3e3),animation:e.dataset.animation&&""!=e.dataset.animation?e.dataset.animation:"smoothly",delay:parseInt(e.dataset.delay&&""!=e.dataset.delay?e.dataset.delay:500),transform:parseInt(e.dataset.transform&&""!=e.dataset.transform?e.dataset.transform:20)}}}},{key:"startAnimation2",value:function(){for(var e=this,s=0,t=function(t){0<t&&(s+=e.$arrayParams[t-1].slideTime),setTimeout(function(){e.changeImages(t),"transform"==e.$arrayParams[t].animation&&e.$text[t].classList.add("transform-start"),setTimeout(function(){"transform"==e.$arrayParams[t].animation?e.changeTextTransform(t):"spell"==e.$arrayParams[t].animation?(e.setText(t),e.changeTextSpell(t,e.$arrayParams[t].textTime)):"smoothly"==e.$arrayParams[t].animation&&(e.cloneText(t),e.changeTextWidth(t))},e.$arrayParams[t].delay)},s)},a=0;a<this.$slides.length;a++)t(a);""!=this.$link&&(s+=this.$time+500,console.log(s),setTimeout(function(){window.location.href=e.$link},s))}},{key:"setText",value:function(t){0<t&&(this.$text[t-1].style.display="none"),this.$text[t].innerText="",this.$text[t].classList.add("for-spell")}},{key:"changeTextSpell",value:function(e,s){var a=this;this.deleteOldClasses(e);for(var i=this.$arrayParams[e].text.length,t=function(t){setTimeout(function(){a.$text[e].innerText=a.$arrayParams[e].text.substring(0,t+1)},t*s/i)},n=0;n<i;n++)t(n)}},{key:"changeImages",value:function(t){this.$slides[t].classList.add("active"),this.$slides[t].style.transitionDuration=this.$arrayParams[t].slideTime/1e3+"s"}},{key:"changeTextTransform",value:function(t){this.deleteOldClasses(t);var e=(this.$arrayParams[t].transform+100)/100;20!=this.$transform&&(this.$text[t].style.transform="scale("+e+","+e+")"),this.$text[t].classList.add("for-transform"),this.$text[t].style.transitionDuration=this.$arrayParams[t].textTime/1e3+"s"}},{key:"cloneText",value:function(t){var e=document.createElement("span");e.classList.add("clone-text"),e.innerHTML=this.$arrayParams[t].text.split(" ").join("&nbsp;"),this.$text[t].appendChild(e)}},{key:"changeTextWidth",value:function(e){var s=this;this.deleteOldClasses(e);for(var a=this.$text[e].offsetWidth,t=function(t){setTimeout(function(){s.$text[e].getElementsByClassName("clone-text")[0].style.width=t+"px"},t*s.$arrayParams[e].textTime/a)},i=1;i<=a;i++)t(i)}},{key:"deleteOldClasses",value:function(t){0<t&&(this.$text[t-1].style.display="none",this.$text[t-1].classList.contains("for-smoothly")&&this.$text[t-1].classList.remove("for-smoothly"),this.$text[t-1].classList.contains("for-spell")&&this.$text[t-1].classList.remove("for-spell"),this.$text[t-1].classList.contains("for-transform")&&this.$text[t-1].classList.remove("for-transform"))}},{key:"startAnimation",value:function(){var e=this;if("smoothly"==this.$animation){this.cloneTextSpan();for(var t=function(t){setTimeout(function(){e.changeImages(t),setTimeout(function(){e.changeTextWidth(t)},e.$delay)},t*e.$time)},s=0;s<this.$slides.length;s++)t(s)}else if("spell"==this.$animation){this.setTextArray();var a=function(t){setTimeout(function(){e.changeImages(t),setTimeout(function(){e.changeTextSpell(t)},e.$delay)},t*e.$time)};for(s=0;s<this.$slides.length;s++)a(s)}else if("transform"==this.$animation){for(s=0;s<this.$text.length;s++)this.$text[s].classList.add("transform-start");for(var i=function(t){setTimeout(function(){e.changeImages(t),setTimeout(function(){e.changeTextTransform(t)},e.$delay)},t*e.$time)},n=0;n<this.$slides.length;n++)i(n)}""!=this.$link&&setTimeout(function(){window.location.href=e.$link},this.$slides.length*this.$time+500)}},{key:"setTextArray",value:function(){for(var t=0;t<this.$text.length;t++)this.$textArray[t]=this.$text[t].innerText,this.$text[t].innerText="",this.$text[t].classList.add("for-spell")}},{key:"cloneTextSpan",value:function(){for(var t=0;t<this.$text.length;t++){var e=document.createElement("span");e.classList.add("clone-text"),e.innerHTML=this.$text[t].innerText.split(" ").join("&nbsp;"),this.$text[t].appendChild(e)}}}]),e}();